services:
  filebrowser:
    image: filebrowser/filebrowser:v2.32.0
    container_name: filebrowser
    hostname: filebrowser
    restart: unless-stopped
    expose:
      - "80"
    labels:
      # Caddy routing labels
      # Pattern: files-<subdomain>.<server_domain> (e.g., files-painfulurial.inojob.com)
      - "caddy=files-${PCS_DOMAIN}"
      - "caddy.reverse_proxy={{upstreams 80}}"
    env_file:
      - .env
    networks:
      - mesh

networks:
  mesh:
    external: true
